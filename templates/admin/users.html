{% extends "admin/base.html" %}

{% block admin_title %}Пользователи{% endblock %}

{% block breadcrumb %}> Пользователи{% endblock %}

{% block admin_content %}
    <h2>Пользователи</h2>
    <table class="admin-table">
        <thead>
            <tr>
                <th>Логин</th>
                <th>Имя</th>
                <th>Почта</th>
                <th>Админ</th>
                <th>Действия</th>
            </tr>
        </thead>
        <tbody>
            {% for user in users %}
            <tr>
                <td>{{ user.windows_login }}</td>
                <td>{{ user.full_name or '' }}</td>
                <td>{{ user.email or '' }}</td>
                <td>{{ 'Да' if user.is_admin else 'Нет' }}</td>
                <td>
                    <a href="{{ url_for('admin_ops.edit_user', user_id=user.id) }}">Редактировать</a> |
                    <form method="POST" action="{{ url_for('admin_ops.delete_user', user_id=user.id) }}" style="display:inline;" onsubmit="return confirm('Удалить пользователя {{ user.windows_login }}?');">
                        <button type="submit" style="background-color: #e74c3c;">Удалить</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <h3>Добавить пользователя</h3>
    <form method="POST" action="{{ url_for('admin_ops.add_user') }}" class="admin-form">
        <label>Логин (Windows): <input type="text" name="login" required></label><br>
        <label>Имя: <input type="text" name="name"></label><br>
        <label>Почта: <input type="email" name="email"></label><br>
        <label>Админ: <input type="checkbox" name="is_admin"></label><br>
        <button type="submit">Добавить</button>
    </form>

    <a href="{{ url_for('admin_ops.index') }}">← Назад</a>
{% endblock %}